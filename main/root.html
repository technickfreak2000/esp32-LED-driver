<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>ESP JSON LED CTL</title>
</head>

<body>

    <h1>ESP JSON LED CTL</h1>
    <br>
    <button onclick="send_test()">Send test</button>
</body>

</html>

<script>
    function send_test() {
        const ledStripData = [
            {
                "id": 0,
                "r": 255,
                "g": 0,
                "b": 0
            },
            {
                "id": 1,
                "r": 0,
                "g": 255,
                "b": 0
            },
            {
                "id": 2,
                "r": 0,
                "g": 0,
                "b": 255
            },
            {
                "id": 3,
                "r": 255,
                "g": 255,
                "b": 255
            }
        ];

        const options = {
            method: 'POST',
            body: JSON.stringify(ledStripData),
            headers: {
                'Content-Type': 'application/json'
            }
        };

        console.debug("Save pressed");
        
        fetch('/api', options)
            .then(response => response.json())
            .then(data => {
                console.log(data); // Assuming the server sends back a JSON response
            })
            .catch(error => {
                console.error('Error:', error);
            });

        window.close();
    }
</script>
